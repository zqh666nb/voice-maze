<!DOCTYPE html>
<html>

<head>
    <title>语音迷宫游戏</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Flask模板语法：引用静态CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='game.css') }}">
</head>

<body>
    <!-- 主菜单 -->
    <div id="mainMenu">
        <h1>语音迷宫游戏</h1>
        <button class="menuBtn" id="startGameBtn">开始游戏</button>
        <button class="menuBtn" id="instructionsBtn">游戏说明</button>
    </div>

    <!-- 游戏容器 -->
    <div id="gameContainer">
        <div id="timer">剩余时间: ??? 秒</div>
        <div id="voiceOutput" style="margin-bottom:10px;color:#2196F3;font-weight:bold;"></div>
        <canvas id="maze" width="???" height="???"></canvas>
        <div id="status">等待指令中...</div>
    </div>

    <!-- 游戏说明弹窗 -->
    <div id="instructionsModal">
        <span class="closeBtn">×</span>
        <h2>游戏说明</h2>
        <h3>操作指令：</h3>
        <ul>
            <li>上 / 向上移动一格</li>
            <li>下 / 向下移动一格</li>
            <li>左 / 向左移动一格</li>
            <li>右 / 向右移动一格</li>
            <li>向上走到头 - 快捷指令：便于快速操作机器人往上直到走到障碍</li>
            <li>向下走到头 - 快捷指令：便于快速操作机器人往上直到走到障碍</li>
        </ul>
        <h3>游戏规则：</h3>
        <p>在120秒内通过语音指令控制机器人走出迷宫！</p>
        <p>每次输入一段语音后，机器人将提取有效指令并执行一系列操作，语音输入间隔大致为1s！！</p>
    </div>

    <!-- Flask模板语法：引用音效 -->
    <audio id="clickSound" src="{{ url_for('static', filename='click.mp3') }}" preload="auto"></audio>

    <!-- 全局弹窗，用于显示成功或失败信息 -->
    <div id="globalModal"
        style="display:none;position:fixed;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.5);z-index:9999;justify-content:center;align-items:center;">
        <div
            style="background:#fff;padding:32px 48px;border-radius:12px;box-shadow:0 2px 16px #0003;font-size:1.5em;text-align:center;min-width:200px;">
            <span id="globalModalMsg"></span>
            <br><br>
            <button onclick="location.reload()" style="font-size:1em;padding:8px 24px;">确定</button>
        </div>
    </div>

    <!-- Flask模板语法：引用JS -->
    <script src="{{ url_for('static', filename='game.js') }}"></script>
</body>

</html>